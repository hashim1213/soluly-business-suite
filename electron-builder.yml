appId: com.soluly.app
productName: Soluly
directories:
  buildResources: build
  output: release

files:
  - '!**/.vscode/*'
  - '!src/*'
  - '!electron/*'
  - '!{.eslintignore,.eslintrc.cjs,.prettierignore,.prettierrc.yaml,dev-app-update.yml,CHANGELOG.md,README.md}'
  - '!{.env,.env.*,*.config.js,*.config.ts,vitest.config.*,playwright.config.*}'
  - '!{tsconfig.json,tsconfig.*.json}'
  - '!supabase/*'
  - '!tests/*'

asarUnpack:
  - resources/**

mac:
  category: public.app-category.business
  target:
    - target: dmg
      arch:
        - arm64
        - x64
    - target: zip
      arch:
        - arm64
        - x64
  icon: build/icon.png
  artifactName: Soluly-${version}-${arch}.${ext}
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: build/entitlements.mac.plist
  entitlementsInherit: build/entitlements.mac.plist

afterSign: scripts/notarize.js

dmg:
  artifactName: Soluly-${version}-${arch}.${ext}
  title: Soluly
  icon: build/icon.png
  contents:
    - x: 130
      y: 220
    - x: 410
      y: 220
      type: link
      path: /Applications

win:
  target:
    - target: nsis
      arch:
        - x64
    - target: zip
      arch:
        - x64
  icon: build/icon.png
  artifactName: Soluly-${version}-${arch}.${ext}

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  artifactName: Soluly-Setup-${version}.${ext}

protocols:
  name: Soluly
  schemes:
    - soluly

publish:
  provider: generic
  url: https://soluly.com/downloads
